Linux-Session-03 - 'Day-03':-

##########
Dtae:- 02-Sept-2022 - Linux Session:-
===================================
Table of Contents:-

Phase-01:-
1. Introduction to Enterprise Linux, and basic understanding/usages of Linux OS.
2. Editor understanding (vim).
3. User/Group management.
4. Linux Permission model.

Phase-02:-
5. Installation of Linux OS (Enterprise Server OS).
6. Processes Management (When any program under execution become a process- Will discuss this)
7. Booting sequence (Complate booting processes involved, How your Enterprise Linux OS starts and be ready for any appliactions deployment).

Phase-03:-
8. File System/Disk management (Linux Partitions - MBR & GPT, Linux File Systems, Moutning etc).
9. Logical Volume Manager (Linux Partition, PV, VG and lvm etc).
10. Swap management.
11. RAID Management.

Phase-04:-
12. Package management uging "yum" and "rpm".
13. Package management using Source.

Phase-05:-
14. Standard I/O Pipes.
15. STDIN 
16. STDOUT
17. STDINT
18. Essential System Administration Tools 

Phase-06:- 
19. Networking Services 
20. Network CLients.
21. Network COnfiguration.
22. Network file sharing services (FTP/NFS/Samaba etc).

Pahse-07:- 
22. Troubleshooting
23. Linux Bind 
24. Linux apache 
25. Linux Squid 
26. Linux Mail srvers.

Mock examples (hand-on based Test). 
##########
Phase-01:-
1. Introduction to Enterprise Linux, and basic understanding/usages of Linux OS.
2. Editor understanding (vim).
3. User/Group management.
4. Linux Permission model.


### Concepts - Installation of EL on system (Physical/Virtual)
  
Physical machine - Laptop/Dell-PowerEdge servers/ HP GEN X / IBM Power/SOme model Blade server/etc.
Virtual Machine  - Virtual machines serve same applications as physical machines.
NOte: ***
 - Virtual machine installed on hypervisor (Hypervisor - It's OS which allow to create Virtual machine).
 - Those virtual machine having guest operating systems, later DB or middleware installed on OS and run the application.
 - Hypervisor (3rd part based software) - which allow to create VIrtual machine.
 - Hypervisor used here is - "Oracle Virtual Box" ( INstalled this on your system).
 - We have used CentOS 7.9 with x86_64 arch and build the OS, Also we have mounted the same ISO on your system.
 - We have used GNOME (GUI interface) and bash (CLI Interface).
 
 - Commands 
 - User & Group management:-
   
  #Users:-
   Create user - useradd 
   Delete user - userdel 
   Modify user - usermod
   
   useradd <user_name> 
   Eg:
   useradd john 
   useradd tom 
   
   
  #Groups:-
   Create group - groupadd 
   Delete group - groupdel 
   modify group - groupmod   
   
  #groupadd <group_name>
	Eg:
	  groupadd unix_team
 
  #passwd (Set password for users).
   passwd <user_name>(as root user).
   passwd john 
   Type:
   retype:
   
   group = unix_team
   useradd -g <primary_group_name> <user_name>
   Eg:
     useradd -g unix_team john  (unix_team is a primary group of john)
	 usermod -G unix_team tom   (unix_team is a secoundry group of yom)
   
   

LAB-01
Create groups:-
unix_adm 
db_adm
devops 
app1
app2 

   
  - Create user = user1 to user5  (belongs to unix_adm)
  - Create user = user6 to user10  (belongs to db_adm)
  - Create user = user11 to user15  (belongs to devops)
  - Create user = user16 to user20  (belongs to app1)
  - Create user = user21 to user25  (belongs to app2)
 
 
   - pAssword for all users is "redhat"
 
 =================================================
 LAB-02:-
 
 groupadd project 
 Assign "project" group to all users (user1 to 40)
 usermod -G project user1 
 usermod -G project user2 
 
 So that user1 will be a part of unix_adm & project.
 
 
 mkdir /Project 
 cd /Project 
 mkdir UNIX DB DEVOPS APP1 APP2 
 chmod 770 /Project 
 chmod 770 UNIX
 chmod 770 DB
 chmod 770 DEVOPS
 chmod 770 APP1
 chmod 770 APP2
 
 pwd
 /Project 
 chown root:unix_adm UNIX 
 chown root:db_adm DB 
 chown root:devops DEVOPS
 chown root:app1 APP1
 chown root:app2 APP2
 
 
 Example:- 
 echo "redhat | passwd --stdin user_name
 echo "redhat | passwd --stdin user1 
 
 ===========
 - NOw only those users part of "project" group can only access "/Project"
 - And everyone can do work on their project only.
 
==========================================================
SOlution:-
#####
- Group Creation:-
for group_name in unix_adm db_adm devops app1 app2 ; do groupadd ${group_name} ; done

- Group Delete 
for group_name in unix_adm db_adm devops app1 app2 ; do groupdel ${group_name} ; done

#####

user1 to user5 (unix_adm group).
- User Creation:-
for user_name in {1..5} ; do useradd -g unix_adm user${user_name}; echo redhat | passwd --stdin user${user_name} ; done

- Delete all users:-
for user_name in {1..5} ; do userdel -r user${user_name} ; done



==============

user6 to user10 (db_adm group).
- User Creation:-
for user_name in {6..10} ; do useradd -g db_adm user${user_name}; echo redhat | passwd --stdin user${user_name} ; done

- Delete all users:-
for user_name in {6-10} ; do userdel -r user${user_name} ; done


============

user11 to user15 (devops group).
- User Creation:-
for user_name in {11..15} ; do useradd -g devops user${user_name}; echo redhat | passwd --stdin user${user_name} ; done

- Delete all users:-
for user_name in {11..15} ; do userdel -r user${user_name} ; done


===================

user1 to user5 (app1 group).
- User Creation:-
for user_name in {16..20} ; do useradd -g app1 user${user_name}; echo redhat | passwd --stdin user${user_name} ; done

- Delete all users:-
for user_name in {16..20} ; do userdel -r user${user_name} ; done



=====================================================

user1 to user5 (app2 group).
- User Creation:-
for user_name in {20..25} ; do useradd -g app2 user${user_name}; echo redhat | passwd --stdin user${user_name} ; done

- Delete all users:-
for user_name in {20..25} ; do userdel -r user${user_name} ; done


============
mkdir -p /project/{UNIX,DB,APP1,APP2,DEVOPS}
chmod 770 /project
cd /project 
chmod 770 UNIX 
chmod 770 DB 
chmod 770 DEVOPS 
chmod 770 APP1
chmod 770 APP2

ls -l 

 chown root:unix_adm UNIX 
 chown root:db_adm DB 
 chown root:devops DEVOPS
 chown root:app1 APP1
 chown root:app2 APP2

==================================================
======================
Note: Setup the network configuration:-
Login as root user.

Open "Oracle Virtual Box". Click on "Setting", Click on "Network", Click on "Adapter 1", 
Click and Select [Attached to:  "Host-Only Adapter"], click on ok 


# cd /etc/sysconfig/network-scripts/
# ls -l ifcfg-enp0s3 
# ifconfig | grep -i flags | grep -i broad | grep -i runn 
# vim ifcfg-enp0s3
press "i" key for insert mode.
ONBOOT=yes
press "esc" key for lock mode
:wq 

# ifup enp0s3
# ifconfig  (get your IP address).

=============
Putty download link:-
https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html


Mputty link.
https://ttyplus.com/downloads/
MTPUTTY NO-INSTALLATION (PORTABLE)



Open mputty and setup the IP.
====================================================================================
Lab-01-Disk Management


Disk/File System Management.

####
Step 1) Add additional disk of 2GB to your server (server01).
- Poweroff the server.
- Open "Oracle Virtual Box". Click on "Setting", Click on "Storage", Controller-Sata- Click on "Add Hard Disk" button, clieck on "Create Hard disk" and complete the process.
- Poweron the server and verify your disk.

# parted -l 
# fdisk -l | grep "Disk /dev/sd" 


Verify: # fdisk -l | grep "Disk /dev/sd"

####
Step 2) Using the mentioned disk.

Now Create Linux disk partitions (MBR-primary partition) on additional disk (/dev/dvb).
  
  # parted /dev/sdb  (Interactive interface).
  
  [root@chandra-trainer-server01 ~]# parted /dev/sdb
GNU Parted 3.1
Using /dev/sdb
Welcome to GNU Parted! Type 'help' to view a list of commands.
(parted) help

(parted) mkpart
Partition type?  primary/extended? primary
File system type?  [ext2]? ext4
Start? 2048s
End? 250M
(parted) print
Model: ATA VBOX HARDDISK (scsi)
Disk /dev/sdb: 2147MB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags:

Number  Start   End    Size   Type     File system  Flags
 1      1049kB  250MB  249MB  primary

(parted) help
  align-check TYPE N                        check partition N for TYPE(min|opt) alignment
  help [COMMAND]                           print general help, or help on COMMAND
  mklabel,mktable LABEL-TYPE               create a new disklabel (partition table)
  mkpart PART-TYPE [FS-TYPE] START END     make a partition
  name NUMBER NAME                         name partition NUMBER as NAME
  print [devices|free|list,all|NUMBER]     display the partition table, available devices, free space,
        all found partitions, or a particular partition
  quit                                     exit program
  rescue START END                         rescue a lost partition near START and END

  resizepart NUMBER END                    resize partition NUMBER
  rm NUMBER                                delete partition NUMBER
  select DEVICE                            choose the device to edit
  disk_set FLAG STATE                      change the FLAG on selected device
  disk_toggle [FLAG]                       toggle the state of FLAG on selected device
  set NUMBER FLAG STATE                    change the FLAG on partition NUMBER
  toggle [NUMBER [FLAG]]                   toggle the state of FLAG on partition NUMBER
  unit UNIT                                set the default unit to UNIT
  version                                  display the version number and copyright information of GNU
        Parted
(parted) mkpart
Partition type?  primary/extended?
Partition type?  primary/extended? primary
File system type?  [ext2]? ext4
Start? 250M
End? 500M
(parted) print
Model: ATA VBOX HARDDISK (scsi)
Disk /dev/sdb: 2147MB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags:

Number  Start   End    Size   Type     File system  Flags
 1      1049kB  250MB  249MB  primary
 2      250MB   500MB  251MB  primary

(parted) mkpart
Partition type?  primary/extended? primary
File system type?  [ext2]? ext4
Start? 501M
End? 750M
(parted) print
Model: ATA VBOX HARDDISK (scsi)
Disk /dev/sdb: 2147MB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags:

Number  Start   End    Size   Type     File system  Flags
 1      1049kB  250MB  249MB  primary
 2      250MB   500MB  251MB  primary
 3      501MB   750MB  249MB  primary

(parted) mkpart
Partition type?  primary/extended? primary
File system type?  [ext2]? ext4
Start? 751M
End? 1025M
Warning: The resulting partition is not properly aligned for best performance.
Ignore/Cancel? ignore
(parted) print
Model: ATA VBOX HARDDISK (scsi)
Disk /dev/sdb: 2147MB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags:

Number  Start   End     Size   Type     File system  Flags
 1      1049kB  250MB   249MB  primary
 2      250MB   500MB   251MB  primary
 3      501MB   750MB   249MB  primary
 4      751MB   1025MB  274MB  primary

(parted) mkpart
Error: Can't create any more partitions.
(parted)


  
  or 
  # parted /dev/sdb mklabel msdos 
  # parted /dev/sdb mkpart primary ext4 2048s 200MB
  # parted /dev/sdb mkpart primary ext4 201MB 401MB
  # parted /dev/sdb mkpart primary ext4 402MB 602MB
  # parted /dev/vdb mkpart primary ext4 603MB 804MB
  # udevadm settle
  
 MBR-primary partition.
 ONly 4 primary partition can be created 
 ==============
 
# lsblk 
NOte: Display all device tree structure 


# mkfs.ext4 /dev/sdb1
# blkid /dev/sdb1 
UUID="ksjd:aksjdhsaj5:lajdhaksu8:kjjashdkj999"
# mkdir /mp_sdb1 
# mount /dev/sdb1 /mp_sdb1 
# df -THP 
You should be able to see the mount point, able to update the data to the device (d/dev/sdb).
===============
Lab-02

- Attached disk of 1 GB and create 4 primary partitions using parted command.
- /dev/sdc1 and /dev/sdc2   - permanent mounting (w.r.t - /mp_sdc1   & /mp_sdc2 ; FS=ext2  
-  /dev/sdc3 and /dev/sdc4  - Temp mounting (w.r.t - /mp_sdc3   & /mp_sdc4}  ; FS=ext4

  # parted /dev/sdb mklabel msdos 
  # parted /dev/sdd mkpart primary ext4 2048s 200MB
  # parted /dev/sdb mkpart primary ext4 201MB 401MB
  # parted /dev/sdb mkpart primary ext4 402MB 602MB
  # parted /dev/vdb mkpart primary ext4 603MB 804MB
  # udevadm settle
  
  

SOlution:-
  # parted /dev/sdc mklabel msdos 
  # parted /dev/sdc mkpart primary ext4 2048s 200MB
  # parted /dev/sdc mkpart primary ext4 201MB 401MB
  # parted /dev/sdc mkpart primary ext4 402MB 602MB
  # parted /dev/sdc mkpart primary ext4 603MB 804MB
  # udevadm settle
  
  # mkfs.ext2 /dev/sdc1 it must be mounted on /mp_sdc1 
  # blkid /dev/sdc1   
  
  # vim /etc/fstab 
  UUID="JHDSGJKkj"   /mp_sdc1   ext2  defaults 0 0 
  
  # mkfs.ext2 /dev/sdc2
  #  # blkid /dev/sdc2
  # vim /etc/fstab 
  UUID="JHDSGJKkj"   /mp_sdc2   ext2  defaults 0 0

  # mount a- 
  
  
  Temp mounting 
  # mkfs.ext4 /dev/sdc3
  # blkid /dev/sdc3 
  
   #mount  /dev/sdc3  /mp_sdc3     
  
  ===============================
  
  Temp mounting 
  # mkfs.ext4 /dev/sdc4
  # blkid /dev/sdc4
  
   #mount  /dev/sdc4 /mp_sdc4
   
================
Lab-03  
- Attached disk of 1 GB and create 1 primary partitions with 800Mb, use parted command.
- make swap file system on above partition.
- Make permanent entry using UUID
- Swap size must be increased.

=============
======================================================================================================
All disks from (/dev/sdb to /dev/sdd).


Step 1) Attached disks from (/dev/sdb to /dev/sdd).

[root@chandra-trainer-server01 ~]# fdisk -l | grep "Disk /dev/sd"
Disk /dev/sda: 26.8 GB, 26843545600 bytes, 52428800 sectors
Disk /dev/sdb: 2147 MB, 2147483648 bytes, 4194304 sectors
Disk /dev/sdc: 2147 MB, 2147483648 bytes, 4194304 sectors
Disk /dev/sdd: 2147 MB, 2147483648 bytes, 4194304 sectors
[root@chandra-trainer-server01 ~]#


[root@chandra-trainer-server01 ~]# lsblk
NAME               MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda                  8:0    0    25G  0 disk
├─sda1               8:1    0   512M  0 part /boot
└─sda2               8:2    0  24.5G  0 part
  ├─rootVG-root    253:0    0  22.5G  0 lvm  /
  └─rootVG-swapVol 253:1    0     2G  0 lvm  [SWAP]
sdb                  8:16   0     2G  0 disk
├─sdb1               8:17   0   237M  0 part /mp_sdb1
├─sdb2               8:18   0   239M  0 part [SWAP]
├─sdb3               8:19   0   237M  0 part
└─sdb4               8:20   0 261.3M  0 part
sdc                  8:32   0     2G  0 disk
sdd                  8:48   0     2G  0 disk
sr0                 11:0    1   9.6G  0 rom
[root@chandra-trainer-server01 ~]# 


Step 2)   /dev/sdb disk operations.
#######
Used for :- Linux partitions (/dev/sdb{1..4})

/dev/sdb1 - Linux partition, format with ext4 file system (Formatting - Placing new type of FS), mount to any directory.
/dev/sdb2 - Linux partition, format with swap FS, actiave the swap memoery.
NOte: Swap FS can not be mount.
/dev/sdb3 - Linux partition, format with ext2 file system (Formatting - Placing new type of FS), mount to any directory.
/dev/sdb4 - Linux partition, format with vfat file system (Formatting - Placing new type of FS), mount to any directory.


[root@chandra-trainer-server01 ~]# swapon -s  | grep /dev/sdb
/dev/sdb2                               partition       244732  0       -2
[root@chandra-trainer-server01 ~]# df -THP | grep /dev/sdb
/dev/sdb4               vfat      274M     0  274M   0% /mp_sdb4
/dev/sdb3               ext2      241M  2.2M  227M   1% /mp_sdb3
/dev/sdb1               ext4      237M  2.2M  218M   1% /mp_sdb1
[root@chandra-trainer-server01 ~]#
[root@chandra-trainer-server01 ~]#
#######


[root@chandra-trainer-server01 ~]# mkfs.ext2 /dev/sdb3
mke2fs 1.42.9 (28-Dec-2013)
Filesystem label=
OS type: Linux
Block size=1024 (log=0)
Fragment size=1024 (log=0)
Stride=0 blocks, Stripe width=0 blocks
60720 inodes, 242688 blocks
12134 blocks (5.00%) reserved for the super user
First data block=1
Maximum filesystem blocks=67371008
30 block groups
8192 blocks per group, 8192 fragments per group
2024 inodes per group
Superblock backups stored on blocks:
        8193, 24577, 40961, 57345, 73729, 204801, 221185

Allocating group tables: done
Writing inode tables: done
Writing superblocks and filesystem accounting information: done

[root@chandra-trainer-server01 ~]# mkfs.vfat /dev/sdb4
mkfs.fat 3.0.20 (12 Jun 2013)
[root@chandra-trainer-server01 ~]# blkid /dev/sdb3
/dev/sdb3: UUID="6c3ddad1-5056-4ee0-93a3-e114ef388f04" TYPE="ext2"
[root@chandra-trainer-server01 ~]# vim /etc/fstab
[root@chandra-trainer-server01 ~]# blkid /dev/sdb4
/dev/sdb4: SEC_TYPE="msdos" UUID="2B10-05E7" TYPE="vfat"
[root@chandra-trainer-server01 ~]# vim /etc/fstab
[root@chandra-trainer-server01 ~]# mount -a
mount: unknown filesystem type 'vfst'
[root@chandra-trainer-server01 ~]# vim /etc/fstab
[root@chandra-trainer-server01 ~]# mount -a
[root@chandra-trainer-server01 ~]# df -THP
Filesystem              Type      Size  Used Avail Use% Mounted on
devtmpfs                devtmpfs  1.5G     0  1.5G   0% /dev
tmpfs                   tmpfs     1.5G     0  1.5G   0% /dev/shm
tmpfs                   tmpfs     1.5G  9.7M  1.5G   1% /run
tmpfs                   tmpfs     1.5G     0  1.5G   0% /sys/fs/cgroup
/dev/mapper/rootVG-root xfs        25G   15G  9.6G  61% /
/dev/sdb1               ext4      237M  2.2M  218M   1% /mp_sdb1
/dev/sda1               xfs       534M  190M  345M  36% /boot
tmpfs                   tmpfs     299M  8.2k  299M   1% /run/user/42
tmpfs                   tmpfs     299M     0  299M   0% /run/user/0
/dev/sdb3               ext2      241M  2.2M  227M   1% /mp_sdb3
/dev/sdb4               vfat      274M     0  274M   0% /mp_sdb4
[root@chandra-trainer-server01 ~]#

[root@chandra-trainer-server01 ~]# free -m -t
              total        used        free      shared  buff/cache   available
Mem:           2845         390        2082          11         373        2295
Swap:          2286           0        2286
Total:         5132         390        4369
[root@chandra-trainer-server01 ~]#
[root@chandra-trainer-server01 ~]#
[root@chandra-trainer-server01 ~]# swapon -s
Filename                                Type            Size    Used    Priority
/dev/sdb2                               partition       244732  0       -2
/dev/dm-1                               partition       2097148 0       -3
[root@chandra-trainer-server01 ~]#


######################################## Disk - /dev/sdc ###################################

Lab-04 - LVM   
- Attached disk of 2.5 GB and create 4 primary partitions with 500Mb, use parted command.
- Create 4 physical volumes
- Create 1 Volume Group 
- Create 1 LVM 
- Install ext4 FS on LVM path and mount to "/lvm_mp1 (permanently)
- USe LVM 100% size of LVM (Mounted in the server - MP "/lvm_mp1"  and then extend the size of LVM.

####
SOlution-Lab04 - LVM 

Step 1) Now Create Linux disk partitions (MBR-primary partition) on additional disk (/dev/sdc).

  # parted /dev/sdc mklabel msdos 
  # parted /dev/sdc mkpart primary ext4 2048s 500MB
  # parted /dev/sdc mkpart primary ext4 501MB 1000MB
  # parted /dev/sdc mkpart primary ext4 1001MB 1500MB
  # parted /dev/sdc mkpart primary ext4 1501MB 2000MB
  # udevadm settle


Output of above commands:-

[root@chandra-trainer-server01 ~]# lsblk
NAME               MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda                  8:0    0    25G  0 disk
├─sda1               8:1    0   512M  0 part /boot
└─sda2               8:2    0  24.5G  0 part
  ├─rootVG-root    253:0    0  22.5G  0 lvm  /
  └─rootVG-swapVol 253:1    0     2G  0 lvm  [SWAP]
sdb                  8:16   0     2G  0 disk
├─sdb1               8:17   0   237M  0 part /mp_sdb1
├─sdb2               8:18   0   239M  0 part [SWAP]
├─sdb3               8:19   0   237M  0 part /mp_sdb3
└─sdb4               8:20   0 261.3M  0 part /mp_sdb4
sdc                  8:32   0     3G  0 disk
├─sdc1               8:33   0   476M  0 part
├─sdc2               8:34   0   476M  0 part
├─sdc3               8:35   0 475.9M  0 part
└─sdc4               8:36   0   476M  0 part
sdd                  8:48   0     2G  0 disk
sr0                 11:0    1   9.6G  0 rom
[root@chandra-trainer-server01 ~]#


Step 2) Physical Volume creation:-
################
Commands used:-

pvcreate /dev/sdc1
pvcreate /dev/sdc2
pvcreate /dev/sdc3
pvcreate /dev/sdc4

or
pvcreate /dev/sdc{1..4}

pvscan 
pvs
pvdisplay /dev/sdc1
pvdisplay /dev/sdc2
pvdisplay /dev/sdc3
pvdisplay /dev/sdc4


################




[root@chandra-trainer-server01 ~]#
[root@chandra-trainer-server01 ~]# pvcreate /dev/sdc1
  Physical volume "/dev/sdc1" successfully created.
[root@chandra-trainer-server01 ~]# pvcreate /dev/sdc2
  Physical volume "/dev/sdc2" successfully created.
[root@chandra-trainer-server01 ~]# pvcreate /dev/sdc3
  Physical volume "/dev/sdc3" successfully created.
[root@chandra-trainer-server01 ~]# pvcreate /dev/sdc4
  Physical volume "/dev/sdc4" successfully created.
[root@chandra-trainer-server01 ~]#



[root@chandra-trainer-server01 ~]# pvscan | grep sdc
  PV /dev/sdc1                      lvm2 [476.00 MiB]
  PV /dev/sdc2                      lvm2 [476.00 MiB]
  PV /dev/sdc3                      lvm2 [475.88 MiB]
  PV /dev/sdc4                      lvm2 [476.00 MiB]
[root@chandra-trainer-server01 ~]#


[root@chandra-trainer-server01 ~]# pvdisplay /dev/sdc1
  "/dev/sdc1" is a new physical volume of "476.00 MiB"
  --- NEW Physical volume ---
  PV Name               /dev/sdc1
  VG Name
  PV Size               476.00 MiB
  Allocatable           NO
  PE Size               0
  Total PE              0
  Free PE               0
  Allocated PE          0
  PV UUID               W1trA2-c7o2-jETQ-lVxj-1YKy-OtLW-6uZrXR

[root@chandra-trainer-server01 ~]# pvdisplay /dev/sdc2
  "/dev/sdc2" is a new physical volume of "476.00 MiB"
  --- NEW Physical volume ---
  PV Name               /dev/sdc2
  VG Name
  PV Size               476.00 MiB
  Allocatable           NO
  PE Size               0
  Total PE              0
  Free PE               0
  Allocated PE          0
  PV UUID               EfK5D7-i68R-sQ2i-9taH-9d8j-Lb3Y-MAYi1c

[root@chandra-trainer-server01 ~]# pvdisplay /dev/sdc3
  "/dev/sdc3" is a new physical volume of "475.88 MiB"
  --- NEW Physical volume ---
  PV Name               /dev/sdc3
  VG Name
  PV Size               475.88 MiB
  Allocatable           NO
  PE Size               0
  Total PE              0
  Free PE               0
  Allocated PE          0
  PV UUID               1CD5Cf-eCwD-QT6g-7Fyf-G3yC-JEuY-Fn1Sbv

[root@chandra-trainer-server01 ~]# pvdisplay /dev/sdc4
  "/dev/sdc4" is a new physical volume of "476.00 MiB"
  --- NEW Physical volume ---
  PV Name               /dev/sdc4
  VG Name
  PV Size               476.00 MiB
  Allocatable           NO
  PE Size               0
  Total PE              0
  Free PE               0
  Allocated PE          0
  PV UUID               ZPQoS4-H3Mx-1Gp7-7nxN-h3xh-1SeG-bUQstc

[root@chandra-trainer-server01 ~]#



Step 3) Volume Group creation:-
################
Commands used:-

vgcreate -s 8M vg_name-01 /dev/sdc{1..3}
vgs
vgscan 
vgdisplay 

###############

[root@chandra-trainer-server01 ~]# vgcreate -s 8M vg_name-01 /dev/sdc{1..3}
  Volume group "vg_name-01" successfully created
[root@chandra-trainer-server01 ~]# vgscan | grep vg_name
  Found volume group "vg_name-01" using metadata type lvm2
[root@chandra-trainer-server01 ~]#
[root@chandra-trainer-server01 ~]# vgs | grep vg_name
  vg_name-01   3   0   0 wz--n-   1.38g 1.38g
[root@chandra-trainer-server01 ~]# vgdisplay vg_name
  Volume group "vg_name" not found
  Cannot process volume group vg_name
[root@chandra-trainer-server01 ~]# vgdisplay vg_name-01
  --- Volume group ---
  VG Name               vg_name-01
  System ID
  Format                lvm2
  Metadata Areas        3
  Metadata Sequence No  1
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                0
  Open LV               0
  Max PV                0
  Cur PV                3
  Act PV                3
  VG Size               1.38 GiB
  PE Size               8.00 MiB
  Total PE              177
  Alloc PE / Size       0 / 0
  Free  PE / Size       177 / 1.38 GiB
  VG UUID               oZfjOG-wHMo-6Gj0-qkwn-e5dX-lO3P-KynGRU

[root@chandra-trainer-server01 ~]# expr 8 \* 177
1416
[root@chandra-trainer-server01 ~]# expr 1416 / 1024
1
[root@chandra-trainer-server01 ~]# bc
bc 1.06.95
Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'.
scale=4
1416 / 1024
1.3828
^C
(interrupt) Exiting bc.
[root@chandra-trainer-server01 ~]# pvdisplay /dev/sdc{1..3}
  --- Physical volume ---
  PV Name               /dev/sdc1
  VG Name               vg_name-01
  PV Size               476.00 MiB / not usable 4.00 MiB
  Allocatable           yes
  PE Size               8.00 MiB
  Total PE              59
  Free PE               59
  Allocated PE          0
  PV UUID               W1trA2-c7o2-jETQ-lVxj-1YKy-OtLW-6uZrXR

  --- Physical volume ---
  PV Name               /dev/sdc2
  VG Name               vg_name-01
  PV Size               476.00 MiB / not usable 4.00 MiB
  Allocatable           yes
  PE Size               8.00 MiB
  Total PE              59
  Free PE               59
  Allocated PE          0
  PV UUID               EfK5D7-i68R-sQ2i-9taH-9d8j-Lb3Y-MAYi1c

  --- Physical volume ---
  PV Name               /dev/sdc3
  VG Name               vg_name-01
  PV Size               475.88 MiB / not usable 3.88 MiB
  Allocatable           yes
  PE Size               8.00 MiB
  Total PE              59
  Free PE               59
  Allocated PE          0
  PV UUID               1CD5Cf-eCwD-QT6g-7Fyf-G3yC-JEuY-Fn1Sbv

[root@chandra-trainer-server01 ~]#


Step 4) Logical Volume creation:-
################
Commands used:-







---------------------

[root@chandra-trainer-server01 ~]# lvcreate -l +40 -n lvm_01 vg_name-01
  Logical volume "lvm_01" created.
[root@chandra-trainer-server01 ~]# lvdisplay /dev/vg_name-01/lvm_01
  --- Logical volume ---
  LV Path                /dev/vg_name-01/lvm_01
  LV Name                lvm_01
  VG Name                vg_name-01
  LV UUID                W19gMH-hath-GNi2-i6Zg-MMaX-ukG9-JoZr9Q
  LV Write Access        read/write
  LV Creation host, time chandra-trainer-server01.example.com, 2022-09-06 17:42:45 +0530
  LV Status              available
  # open                 0
  LV Size                320.00 MiB
  Current LE             40
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     8192
  Block device           253:2

[root@chandra-trainer-server01 ~]# bc
bc 1.06.95
Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'.
320 / 8
40
^C
(interrupt) Exiting bc.
[root@chandra-trainer-server01 ~]# vgscan
  Reading volume groups from cache.
  Found volume group "vg_name-01" using metadata type lvm2
  Found volume group "rootVG" using metadata type lvm2
[root@chandra-trainer-server01 ~]# lvscan
  ACTIVE            '/dev/vg_name-01/lvm_01' [320.00 MiB] inherit
  ACTIVE            '/dev/rootVG/swapVol' [2.00 GiB] inherit
  ACTIVE            '/dev/rootVG/root' [<22.50 GiB] inherit
[root@chandra-trainer-server01 ~]# lvs
  LV      VG         Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  root    rootVG     -wi-ao---- <22.50g
  swapVol rootVG     -wi-ao----   2.00g
  lvm_01  vg_name-01 -wi-a----- 320.00m
[root@chandra-trainer-server01 ~]#


  
  ============
  
[root@chandra-trainer-server01 ~]# vgcreate -s 8M vg_name-01 /dev/sdc{1..3}
  Volume group "vg_name-01" successfully created
[root@chandra-trainer-server01 ~]# vgscan | grep vg_name
  Found volume group "vg_name-01" using metadata type lvm2
[root@chandra-trainer-server01 ~]#
[root@chandra-trainer-server01 ~]# vgs | grep vg_name
  vg_name-01   3   0   0 wz--n-   1.38g 1.38g
[root@chandra-trainer-server01 ~]# vgdisplay vg_name
  Volume group "vg_name" not found
  Cannot process volume group vg_name
[root@chandra-trainer-server01 ~]# vgdisplay vg_name-01
  --- Volume group ---
  VG Name               vg_name-01
  System ID
  Format                lvm2
  Metadata Areas        3
  Metadata Sequence No  1
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                0
  Open LV               0
  Max PV                0
  Cur PV                3
  Act PV                3
  VG Size               1.38 GiB
  PE Size               8.00 MiB
  Total PE              177
  Alloc PE / Size       0 / 0
  Free  PE / Size       177 / 1.38 GiB
  VG UUID               oZfjOG-wHMo-6Gj0-qkwn-e5dX-lO3P-KynGRU

[root@chandra-trainer-server01 ~]# expr 8 \* 177
1416
[root@chandra-trainer-server01 ~]# expr 1416 / 1024
1
[root@chandra-trainer-server01 ~]# bc
bc 1.06.95
Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'.
scale=4
1416 / 1024
1.3828
^C
(interrupt) Exiting bc.
[root@chandra-trainer-server01 ~]# pvdisplay /dev/sdc{1..3}
  --- Physical volume ---
  PV Name               /dev/sdc1
  VG Name               vg_name-01
  PV Size               476.00 MiB / not usable 4.00 MiB
  Allocatable           yes
  PE Size               8.00 MiB
  Total PE              59
  Free PE               59
  Allocated PE          0
  PV UUID               W1trA2-c7o2-jETQ-lVxj-1YKy-OtLW-6uZrXR

  --- Physical volume ---
  PV Name               /dev/sdc2
  VG Name               vg_name-01
  PV Size               476.00 MiB / not usable 4.00 MiB
  Allocatable           yes
  PE Size               8.00 MiB
  Total PE              59
  Free PE               59
  Allocated PE          0
  PV UUID               EfK5D7-i68R-sQ2i-9taH-9d8j-Lb3Y-MAYi1c

  --- Physical volume ---
  PV Name               /dev/sdc3
  VG Name               vg_name-01
  PV Size               475.88 MiB / not usable 3.88 MiB
  Allocatable           yes
  PE Size               8.00 MiB
  Total PE              59
  Free PE               59
  Allocated PE          0
  PV UUID               1CD5Cf-eCwD-QT6g-7Fyf-G3yC-JEuY-Fn1Sbv

[root@chandra-trainer-server01 ~]#
[root@chandra-trainer-server01 ~]#
[root@chandra-trainer-server01 ~]#
[root@chandra-trainer-server01 ~]# vgdisplay vg_name-01
[root@chandra-trainer-server01 ~]# vgdisplay vg_name-01
  --- Volume group ---
  VG Name               vg_name-01
  System ID
  Format                lvm2
  Metadata Areas        3
  Metadata Sequence No  1
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                0
  Open LV               0
  Max PV                0
  Cur PV                3
  Act PV                3
  VG Size               1.38 GiB
  PE Size               8.00 MiB
  Total PE              177
  Alloc PE / Size       0 / 0
  Free  PE / Size       177 / 1.38 GiB
  VG UUID               oZfjOG-wHMo-6Gj0-qkwn-e5dX-lO3P-KynGRU

[root@chandra-trainer-server01 ~]# lvcreate -l +40 -n lvm_01 vg_name-01
  Logical volume "lvm_01" created.
[root@chandra-trainer-server01 ~]# lvdisplay /dev/vg_name-01/lvm_01
  --- Logical volume ---
  LV Path                /dev/vg_name-01/lvm_01
  LV Name                lvm_01
  VG Name                vg_name-01
  LV UUID                W19gMH-hath-GNi2-i6Zg-MMaX-ukG9-JoZr9Q
  LV Write Access        read/write
  LV Creation host, time chandra-trainer-server01.example.com, 2022-09-06 17:42:45 +0530
  LV Status              available
  # open                 0
  LV Size                320.00 MiB
  Current LE             40
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     8192
  Block device           253:2

[root@chandra-trainer-server01 ~]# bc
bc 1.06.95
Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'.
320 / 8
40
^C
(interrupt) Exiting bc.
[root@chandra-trainer-server01 ~]# vgscan
  Reading volume groups from cache.
  Found volume group "vg_name-01" using metadata type lvm2
  Found volume group "rootVG" using metadata type lvm2
[root@chandra-trainer-server01 ~]# lvscan
  ACTIVE            '/dev/vg_name-01/lvm_01' [320.00 MiB] inherit
  ACTIVE            '/dev/rootVG/swapVol' [2.00 GiB] inherit
  ACTIVE            '/dev/rootVG/root' [<22.50 GiB] inherit
[root@chandra-trainer-server01 ~]# lvs
  LV      VG         Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  root    rootVG     -wi-ao---- <22.50g
  swapVol rootVG     -wi-ao----   2.00g
  lvm_01  vg_name-01 -wi-a----- 320.00m
[root@chandra-trainer-server01 ~]#
[root@chandra-trainer-server01 ~]#
[root@chandra-trainer-server01 ~]# lvdisplay /dev/vg_name-01/lvm_01
  --- Logical volume ---
  LV Path                /dev/vg_name-01/lvm_01
  LV Name                lvm_01
  VG Name                vg_name-01
  LV UUID                W19gMH-hath-GNi2-i6Zg-MMaX-ukG9-JoZr9Q
  LV Write Access        read/write
  LV Creation host, time chandra-trainer-server01.example.com, 2022-09-06 17:42:45 +0530
  LV Status              available
  # open                 0
  LV Size                320.00 MiB
  Current LE             40
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     8192
  Block device           253:2

[root@chandra-trainer-server01 ~]# mkfs.ext4 /dev/vg_name-01/lvm_01
mke2fs 1.42.9 (28-Dec-2013)
Filesystem label=
OS type: Linux
Block size=1024 (log=0)
Fragment size=1024 (log=0)
Stride=0 blocks, Stripe width=0 blocks
81920 inodes, 327680 blocks
16384 blocks (5.00%) reserved for the super user
First data block=1
Maximum filesystem blocks=33947648
40 block groups
8192 blocks per group, 8192 fragments per group
2048 inodes per group
Superblock backups stored on blocks:
        8193, 24577, 40961, 57345, 73729, 204801, 221185

Allocating group tables: done
Writing inode tables: done
Creating journal (8192 blocks): done
Writing superblocks and filesystem accounting information: done

[root@chandra-trainer-server01 ~]# blkid /dev/vg_name-01/lvm_01
/dev/vg_name-01/lvm_01: UUID="0a347671-382c-43a6-ab49-1a931ce40736" TYPE="ext4"
[root@chandra-trainer-server01 ~]#  UUID="0a347671-382c-43a6-ab49-1a931ce40736" ^C
[root@chandra-trainer-server01 ~]# vim /etc/fstab
[root@chandra-trainer-server01 ~]# mkdir /lvm_mp1
[root@chandra-trainer-server01 ~]# mount -a
[root@chandra-trainer-server01 ~]# df -THP
Filesystem                     Type      Size  Used Avail Use% Mounted on
devtmpfs                       devtmpfs  1.5G     0  1.5G   0% /dev
tmpfs                          tmpfs     1.5G     0  1.5G   0% /dev/shm
tmpfs                          tmpfs     1.5G  9.7M  1.5G   1% /run
tmpfs                          tmpfs     1.5G     0  1.5G   0% /sys/fs/cgroup
/dev/mapper/rootVG-root        xfs        25G   15G  9.6G  61% /
/dev/sdb4                      vfat      274M     0  274M   0% /mp_sdb4
/dev/sdb3                      ext2      241M  2.2M  227M   1% /mp_sdb3
/dev/sdb1                      ext4      237M  233M     0 100% /mp_sdb1
/dev/sda1                      xfs       534M  190M  345M  36% /boot
tmpfs                          tmpfs     299M   13k  299M   1% /run/user/42
tmpfs                          tmpfs     299M     0  299M   0% /run/user/0
/dev/mapper/vg_name--01-lvm_01 ext4      317M  2.2M  294M   1% /lvm_mp1
[root@chandra-trainer-server01 ~]# dd if=/dev/zero of=/lvm_mp1/file1 bs=1M count=500
dd: error writing ‘/lvm_mp1/file1’: No space left on device
296+0 records in
295+0 records out
310243328 bytes (310 MB) copied, 5.22165 s, 59.4 MB/s
[root@chandra-trainer-server01 ~]# df -THP
Filesystem                     Type      Size  Used Avail Use% Mounted on
devtmpfs                       devtmpfs  1.5G     0  1.5G   0% /dev
tmpfs                          tmpfs     1.5G     0  1.5G   0% /dev/shm
tmpfs                          tmpfs     1.5G  9.7M  1.5G   1% /run
tmpfs                          tmpfs     1.5G     0  1.5G   0% /sys/fs/cgroup
/dev/mapper/rootVG-root        xfs        25G   15G  9.6G  61% /
/dev/sdb4                      vfat      274M     0  274M   0% /mp_sdb4
/dev/sdb3                      ext2      241M  2.2M  227M   1% /mp_sdb3
/dev/sdb1                      ext4      237M  233M     0 100% /mp_sdb1
/dev/sda1                      xfs       534M  190M  345M  36% /boot
tmpfs                          tmpfs     299M   13k  299M   1% /run/user/42
tmpfs                          tmpfs     299M     0  299M   0% /run/user/0
/dev/mapper/vg_name--01-lvm_01 ext4      317M  313M     0 100% /lvm_mp1
[root@chandra-trainer-server01 ~]# vgdisplay
  --- Volume group ---
  VG Name               vg_name-01
  System ID
  Format                lvm2
  Metadata Areas        3
  Metadata Sequence No  2
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                1
  Open LV               1
  Max PV                0
  Cur PV                3
  Act PV                3
  VG Size               1.38 GiB
  PE Size               8.00 MiB
  Total PE              177
  Alloc PE / Size       40 / 320.00 MiB
  Free  PE / Size       137 / 1.07 GiB
  VG UUID               oZfjOG-wHMo-6Gj0-qkwn-e5dX-lO3P-KynGRU

  --- Volume group ---
  VG Name               rootVG
  System ID
  Format                lvm2
  Metadata Areas        1
  Metadata Sequence No  3
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                2
  Open LV               2
  Max PV                0
  Cur PV                1
  Act PV                1
  VG Size               <24.50 GiB
  PE Size               4.00 MiB
  Total PE              6271
  Alloc PE / Size       6271 / <24.50 GiB
  Free  PE / Size       0 / 0
  VG UUID               IoUOGE-471F-oLH4-qVv8-exos-0J0i-feLf3x

[root@chandra-trainer-server01 ~]# vgdisplay vg_name-01
  --- Volume group ---
  VG Name               vg_name-01
  System ID
  Format                lvm2
  Metadata Areas        3
  Metadata Sequence No  2
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                1
  Open LV               1
  Max PV                0
  Cur PV                3
  Act PV                3
  VG Size               1.38 GiB
  PE Size               8.00 MiB
  Total PE              177
  Alloc PE / Size       40 / 320.00 MiB
  Free  PE / Size       137 / 1.07 GiB
  VG UUID               oZfjOG-wHMo-6Gj0-qkwn-e5dX-lO3P-KynGRU

[root@chandra-trainer-server01 ~]# lvextend -l +40 -n /dev/vg_name-01/lvm_01
  Size of logical volume vg_name-01/lvm_01 changed from 320.00 MiB (40 extents) to 640.00 MiB (80 extents).
  Logical volume vg_name-01/lvm_01 successfully resized.
[root@chandra-trainer-server01 ~]# lvdisplay /dev/vg_name-01/lvm_01
  --- Logical volume ---
  LV Path                /dev/vg_name-01/lvm_01
  LV Name                lvm_01
  VG Name                vg_name-01
  LV UUID                W19gMH-hath-GNi2-i6Zg-MMaX-ukG9-JoZr9Q
  LV Write Access        read/write
  LV Creation host, time chandra-trainer-server01.example.com, 2022-09-06 17:42:45 +0530
  LV Status              available
  # open                 1
  LV Size                640.00 MiB
  Current LE             80
  Segments               2
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     8192
  Block device           253:2

[root@chandra-trainer-server01 ~]# df -THP
Filesystem                     Type      Size  Used Avail Use% Mounted on
devtmpfs                       devtmpfs  1.5G     0  1.5G   0% /dev
tmpfs                          tmpfs     1.5G     0  1.5G   0% /dev/shm
tmpfs                          tmpfs     1.5G  9.7M  1.5G   1% /run
tmpfs                          tmpfs     1.5G     0  1.5G   0% /sys/fs/cgroup
/dev/mapper/rootVG-root        xfs        25G   15G  9.6G  61% /
/dev/sdb4                      vfat      274M     0  274M   0% /mp_sdb4
/dev/sdb3                      ext2      241M  2.2M  227M   1% /mp_sdb3
/dev/sdb1                      ext4      237M  233M     0 100% /mp_sdb1
/dev/sda1                      xfs       534M  190M  345M  36% /boot
tmpfs                          tmpfs     299M   13k  299M   1% /run/user/42
tmpfs                          tmpfs     299M     0  299M   0% /run/user/0
/dev/mapper/vg_name--01-lvm_01 ext4      317M  313M     0 100% /lvm_mp1
[root@chandra-trainer-server01 ~]# resize2fs /dev/mapper/vg_name--01-lvm_01
resize2fs 1.42.9 (28-Dec-2013)
Filesystem at /dev/mapper/vg_name--01-lvm_01 is mounted on /lvm_mp1; on-line resizing required
old_desc_blocks = 3, new_desc_blocks = 5
The filesystem on /dev/mapper/vg_name--01-lvm_01 is now 655360 blocks long.

[root@chandra-trainer-server01 ~]# df -THP
Filesystem                     Type      Size  Used Avail Use% Mounted on
devtmpfs                       devtmpfs  1.5G     0  1.5G   0% /dev
tmpfs                          tmpfs     1.5G     0  1.5G   0% /dev/shm
tmpfs                          tmpfs     1.5G  9.7M  1.5G   1% /run
tmpfs                          tmpfs     1.5G     0  1.5G   0% /sys/fs/cgroup
/dev/mapper/rootVG-root        xfs        25G   15G  9.6G  61% /
/dev/sdb4                      vfat      274M     0  274M   0% /mp_sdb4
/dev/sdb3                      ext2      241M  2.2M  227M   1% /mp_sdb3
/dev/sdb1                      ext4      237M  233M     0 100% /mp_sdb1
/dev/sda1                      xfs       534M  190M  345M  36% /boot
tmpfs                          tmpfs     299M   13k  299M   1% /run/user/42
tmpfs                          tmpfs     299M     0  299M   0% /run/user/0
/dev/mapper/vg_name--01-lvm_01 ext4      642M  313M  295M  52% /lvm_mp1
[root@chandra-trainer-server01 ~]#

==============