
Day-05 - Linux - session



################
Table of Contents:-

##
Phase-01:-
1. Introduction to Enterprise Linux, and basic understanding/usages of Linux OS.
2. Editor understanding (vim).
3. User/Group management.
4. Linux Permission model.

##
Phase-02:-
5. Installation of Linux OS (Enterprise Server OS).
6. Processes Management (When any program under execution become a process- Will discuss this)
7. Booting sequence (Complate booting processes involved, How your Enterprise Linux OS starts and be ready for any appliactions deployment).

##
Phase-03:-
8. File System/Disk management (Linux Partitions - MBR & GPT, Linux File Systems, Moutning etc).
9. Logical Volume Manager (Linux Partition, PV, VG and lvm etc).
10. Swap management.
11. RAID Management.

##
Phase-04:-
12. Package management uging "yum" and "rpm".
13. Package management using Source.

##
Phase-05:-
14. Standard I/O Pipes.
15. STDIN 
16. STDOUT
17. STDINT
18. Essential System Administration Tools 
===========================================================
##
Phase-06:- 
19. Networking Services 
20. Network CLients.
21. Network COnfiguration.
22. Network file sharing services (FTP/NFS/Samaba etc).

##
Pahse-07:- 
22. Troubleshooting
23. Linux Bind 
24. Linux apache 
25. Linux Squid 
26. Linux Mail srvers.
#################################################
======================== Quick Recap =======================================
Phase-01:-
1. Introduction to Enterprise Linux, and basic understanding/usages of Linux OS.
2. Editor understanding (vim).
3. User/Group management.
4. Linux Permission model.


### Concepts - Installation of Enterprise Linux (EL) on system (Physical/Virtual).
  
Physical machine - Laptop/Dell-PowerEdge servers/ HP GEN X / IBM Power/SOme model Blade server/etc.
Virtual Machine  - Virtual machines serve same applications as physical machines.
NOte: ***
 - Virtual machine installed on hypervisor (Hypervisor - It's OS which allow to create Virtual machine).
 - Those virtual machine having guest operating systems, later DB or middleware installed on OS and run the application.
 - Hypervisor (3rd part based software) - which allow to create VIrtual machine.
 - Hypervisor used here is - "Oracle Virtual Box" ( INstalled this on your system).
 - We have used CentOS 7.9 with x86_64 arch and build the OS, Also we have mounted the same ISO on your system (For the purpose - package management).
 - We have used GNOME (GUI interface) and bash (CLI Interface).
 
 - Hypervisor used here is - "Oracle Virtual Box" and it allow to add additional hardwares (Network Interface Card "NIC", hard disk, Increase RAM/CPU etc - Complate management of your Virtual machine can be easily done. 
 
##
 - Basic Linux commands and FOSS (Free OpenSource Software).
 - OpenSource - Source code and software must be available for all.
 - Basic command concepts:-
   # command option argument 
   Command - It is a utility, which can be used to perform some actions/events.
   OPtion - Option is/are required for modify the behavious/function of the command.
   Argument(s) - This is/are data which is required to execute the command.
   
##
2. Editor understanding (vim).
vim file_name
press "i" key - insert mode 

Type your 1st line.
Type your 2nd line.
Type your 3rd line.
Continue as per your task.

press "esc" key - Lock mode.

press ":wq" or ":wq!" or ":q" or ":q!" or ":w"

   w - write 
   q - quit
   - - nothong 
   
   
  # vimtutor
  Not: vimtutor is an application which gives you option to edit/update/create-new-file/delete the file's lines.
  - vimtutor (If you want to come out from "vimtutor" then same way need to come out as file).
     Press :wq
	 here not saving anything so :q 
	 Search part - press /"search_string" then enter.
	 Press "n" for next search and continu
	 Press "N" privious search and continu.
	 Press "g" to come to top line.
	 press "G" to go the the last line.
	 
	 
	 # Command option argument 
      - command having manual pages.
	    man 1 basic_command (basic_command - /bin or /usr/bin).
		Eg:
		man 1 mkdir 
		
		
		man 8 admin_related_command (sbin_command - /sbin or /usr/sbin).
		Eg:
		man 8 useradd 
		
	    man 5 file_name 
		Eg:
		man 5 passwd  (/etc/passwd).
		Eg: 
		 man 5 passwd or man 5 shadow 
		
	 Search part - press /"search_string" then enter.
	 Press "n" for next search and continu
	 Press "N" privious search and continu.
	 Press "g" to come to top line.
	 press "G" to go the the last line.
	 

    
 - User & Group management:-
   
  #Users:-
   Create user - useradd 
   Delete user - userdel 
   Modify user - usermod
   
   useradd <user_name> 
   Eg:
   useradd john 
   useradd tom 
   
  
  #Groups:-
   Create group - groupadd 
   Delete group - groupdel 
   modify group - groupmod   
   
  #groupadd <group_name>
	Eg:
	  groupadd unix_team
 
  #passwd (Set password for users).
   passwd <user_name>(as root user).
   passwd john 
   Type:
   retype:    
   
   group = unix_team
   useradd -g <primary_group_name> <user_name>
   Eg:
     useradd -g unix_team john  (unix_team is a primary group of john)
	 usermod -G unix_team tom   (unix_team is a secoundry group of yom).
	 
	 
	 ###########
	 1) groupadd 
	 2) groupdel
	 3) groupmod 
	 4) useradd 
	 5) usermod 
	 6) userdel 
	 7) passwd (echo "password@123"  | passwd --stdin user_name )
	    Example echo "password@123"  | passwd --stdin john
     8) chmod 
	 9) chown 
	 files:-
	 /etc/passwd     (man 5 passwd)
	 /etc/group      (man 5 group)
	 /etc/shadow     (man 5 shadow)
	 /etc/login.def  (man 5 login.def)
	 
	 ###########
	 Recap-Lab-01:-
	 
	 1) Group creation:-
         unix_grp with GID=4067
         middleware_grp with GID=4167
		 dba_grp with GID=4267
		 wintel_grp with GID=4367 
		 app1_grp with GID=4467

		 
	 2) user_name1/25  (25 user need to be created as per request, below all user's group as primary).
	    - user_name1 to user_name5 - unix_grp , UID=12345/6/7/8/9  ,comment="Unix Team" (user_name2 = 12346)
	    - user_name6 to user_name10 - dba_grp ,  UID=11345/6/7/8/9 , comment="  DBA Team"
	    - user_name11 to user_name15 - middleware_grp   , UID=13345/6/7/8/9, command ="middleware User"
	    - user_name16 to user_name20 - wintel_grp  , UID=12445/6/7/8/9, command ="Wintel User"
		- user_name21 to user_name25 - appl_grp , UID=13545/6/7/8/9, comment ="app1 User"
		
	 3) Below directory structure.
	 
	   /PROJETC_ORG
	       UNIX      grp_owner= unix_grp  (like this.)
		   MIDDLEWARE
		   WINTEL 
		   DBA 
		   APP1
		   
	 4) Set the permission and ownership/group-ownership 
		   chmod 770 - all the directory  
		   chown root:unix_grp  UNIX
     5) Create "project" group and add all 25 users.
        Set the permission on project dir and it's sub directories "/Project" - (chmod 770 
		
============== SOlution
Lab-01-Recap-phase01

####
*** point-01 

man groupadd
groupadd -g 4067 unix_grp
groupadd -g 4167 middleware_grp
groupadd -g 4267 dba_grp
groupadd -g 4367 wintel_grp
groupadd -g 4467 app1_grp

Veirfy
cat /etc/group | grep _grp

***Point-02
useradd -u 12345 -c "Unix Team" -g unix_grp user_name1
useradd -u 12346 -c "Unix Team" -g unix_grp user_name2
useradd -u 12347 -c "Unix Team" -g unix_grp user_name3
useradd -u 12348 -c "Unix Team" -g unix_grp user_name4
useradd -u 12349 -c "Unix Team" -g unix_grp user_name5 

echo redhat | passwd --stdin user_name1
echo redhat | passwd --stdin user_name2
echo redhat | passwd --stdin user_name3
echo redhat | passwd --stdin user_name4
echo redhat | passwd --stdin user_name5


PLease continue for next 25 user from 6 onwards.


***Point-03

mkdir -p /Project_ORG/{UNIX,MIDDLEWARE,DBA,WINTEL,APP1}
chmod -R 770 /Project_ORG/
chown root:project  /Project_ORG/
cd /Project_ORG/
chmod 770 * 
chown root:unix_grp UNIX 
chown root:middleware_grp MIDDLEWARE
chown root:dba_grp DBA 
chown root:wintel_grp WINTEL 
chown root:app1_grp APP1

=======
cat /etc/group | grep project
ls -ld /Project_ORG/
ls -l /Project_ORG/
for x in {1..5}; do id user_name$x; done
for x in {1..25}; do id user_name$x; done

######################################################################################################
##
Phase-02:-
5. Installation of Linux OS (Enterprise Server OS).
6. Processes Management (When any program under execution become a process- Will discuss this)
7. Booting sequence (Complate booting processes involved, How your Enterprise Linux OS starts and be ready for any appliactions deployment).

##
Phase-03:-
8. File System/Disk management (Linux Partitions - MBR & GPT, Linux File Systems, Moutning etc).
9. Logical Volume Manager (Linux Partition, PV, VG and lvm etc).
10. Swap management.
11. RAID Management.
##
Phase-04:-
12. Package management uging "yum" and "rpm".
13. Package management using Source.

##
Phase-05:-
14. Standard I/O Pipes.
15. STDIN 
16. STDOUT
17. STDINT
18. Essential System Administration Tools 
=======================########################====================================
Below points we have done (Pending topics we will be doing it).
1st we will do below concept's lab and will move to pending topics.


5. Installation of Linux OS (Enterprise Server OS).
8. File System/Disk management (Linux Partitions - MBR & GPT, Linux File Systems, Moutning etc).
9. Logical Volume Manager (Linux Partition, PV, VG and lvm etc).
10. Swap management.
12. Package management uging "yum" and "rpm".
14. Standard I/O Pipes.
15. STDIN 
16. STDOUT
17. STDINT
18. Essential System Administration Tools   (We will do Recap on this).

##################==== LABs-02 Lab-01-Recap-phase02/3/4/5  (Topics/Concepts which we have covered).

LABs-02 Lab-01-Recap-phase02/3/4/5  (20-25 mins - MAX)
####
Instruction to be followed before performing the below lab's tasks.

### Point-01
- Shutdown/poweredOff  the current VMs (server-01).
- Now build new VM with a name (server-02).
- Make sure you should take care of BIOS setting so that your system again not go for same installation step (previous step).
- Make sure you must attach ISO for package management.
- Make sure you must be having "YUM" configued.
- Make sure your system name must be defined.
   hostnamectl set-hostname chandra-empID-server-02.example.com 
   cat /etc/hostname 
- Make sure you must setup the basic network for your putty configuration.
- Make sure you must be access your server-02 from mputty.

### Point-02 

- Attached disk of 3 GB and create 4 primary partitions using parted command.
- Each partition must be having apprx 500MB size.
- 1st partition (/dev/sdb1) must be having ext3 file system and contain below data. 
- 1st partition (/dev/sdb1) must be mounted on mentioned mount point (/mp_sdb1)
- Create below directory structure and perform the operations.
- Permanent mounting must be done (update in /etc/fstab)
 
#####
mkdir -p /mp_sdb1/Project_server02/{UNIX,MIDDLEWARE,DBA,WINTEL,APP1}
chmod -R 770 /mp_sdb1/Project_server02
chown root:project  /mp_sdb1/
chown root:project  /mp_sdb1/Project_server02
cd /mp_sdb1/Project_server02
chmod 770 * 
chown root:unix_grp UNIX 
chown root:middleware_grp MIDDLEWARE
chown root:dba_grp DBA 
chown root:wintel_grp WINTEL 
chown root:app1_grp APP1

Verify the user access same as previous (This time directory changed).

#####
- 2nd partition (/dev/sdb2) must be having ext2 and mounted on /mp_sdb2.
- Copy all data from /mp_sdb1 to /mp_sdb2
- Permanent mounting must be done (update in /etc/fstab) 

- 3rd partition (/dev/sdb3) must be having vfat and mounted on /mp_sdb3.
- Copy all data from /mp_sdb1 to /mp_sdb3 
- Permanent mounting must be done (update in /etc/fstab)

- 4th partition (/dev/sdb4) must be swap. 
- Permanent mounting must be done (update in /etc/fstab)


=======================##############################################
LABs-03 Lab-01-Recap-phase02/3/4/5
####

- Attached disk of 4 GB and create 4 primary partitions using parted command.
- Each partition must be having exactly 500MB size.
- Use all 4 primary partitions for Physical Volume (PV).
- Use all these 4 PVs to create required VG (VOlume Group) with a name "vg_disk_03_sdc".
- While creating mentioned VG (vg_disk_03_sdc) PE (Physical Extend) size must be 32MB.
- Create LV (Logical VOlume) as per details mentioned below.
   - LV name must be "lv_disk_03_sdc"
   - size must be between 250Mb to 270Mb.
     Verify size (lvdisplay /dev/vg_disk_03_sdc/lv_disk_03_sdc).
   - LVM "lv_disk_03_sdc" must be mounted on "/lvm_mp1" with ext4 file system.
     (Verify the output - df -THP).
   - Now use dd command and utilized the LVM disk space 100%.
     (Hint - dd if=/dev/zero of=/lvm_mp1/file1 bs=1M count=300)
   - Check the disk space for "/lvm_mp1" mount point and if it's used 90% or more then extend the LVM (	 /dev/vg_disk_03_sdc/lv_disk_03_sdc) by 300MB more size.

    (Hint below command)
	# lvextend -l +(No_OF_PE)  /dev/vg_disk_03_sdc/lv_disk_03_sdc
	# resize2fs  /dev/vg_disk_03_sdc/lv_disk_03_sdc
   - Verify the output and confirmthe same.

##########
 Solution LABs-03 Lab-01-Recap-phase02/3/4/5
##########  
   
   
 ===============================================================================================
##########
SOlution LABs-02 Lab-01-Recap-phase02/3/4/5
##########
### Point-01
- Shutdown/poweredOff  the current VMs (server-01) - Done 
- Now build new VM with a name (server-02) - Done 
- Make sure you should take care of BIOS setting so that your system again not go for same installation step (previous step).
- Make sure you must attach ISO for package management.
- Make sure you must be having "YUM" configued.
- Make sure your system name must be defined.
   hostnamectl set-hostname chandra-empID-server-02.example.com 
   cat /etc/hostname 
- Make sure you must setup the basic network for your putty configuration.
- Make sure you must be access your server-02 from mputty.


################################################

[root@chandra-empid-server-02 ~]# history
    1  hostnamectl set-hostname chandra-empID-server-02.example.com
    2  exit
    3  fdisk -l | grep "Disk /dev/sd"
    4  parted /dev/sdb mklabel msdos
    5  parted /dev/sdb mkpart primary ext3 2048s 500MB
    6  parted /dev/sdb mkpart primary ext2 501MB 1001MB
    7  parted /dev/sdb mkpart primary vfat 1002MB 1502MB
    8  parted /dev/sdb mkpart primary ext2 1002MB 1502MB
    9  parted /dev/vdb mkpart primary swap 1503MB 2003MB
   10  parted /dev/sdb mkpart primary swap 1503MB 2003MB
   11  parted /dev/sdb mkpart primary ext4 1503MB 2003MB
   12  udevadm settle
   13  parted list
   14  parted print
   15  parted -l
   16  parted -l | grep "/dev/sdb"
   17  parted -l | less
   18  parted -l /dev/sdb
   19  parted print  /dev/sdb
   20  parted  /dev/sdb
   21  mkfs.ext3 /dev/sdb1
   22  mkfs.ext2 /dev/sdb2
   23  mkfs.vfat /dev/sdb3
   24  mkswap /dev/sdb4
   25  mkdir /mp_sdb1
   26  mkdir /mp_sdb2
   27  mkdir /mp_sdb3
   28  blkid
   29  vim /etc/fstab
   30  blkid /dev/sdb1
   31  blkid /dev/sdb1 >> /etc/fstab
   32  blkid /dev/sdb2 >> /etc/fstab
   33  vim /etc/fstab
   34  cat /etc/fstab
   35  mkdir /mpsd{1..3}
   36  swapon -s
   37  swapon -a
   38  swapon -s
   39  mount -a
   40  vim /etc/fstab
   41  mount -a
   42  df -THP
   43  swapon -a
   44  swapon -s
   45  mount -a
   46  mkdir -p /mp_sdb1/Project_server02/{UNIX,MIDDLEWARE,DBA,WINTEL,APP1}
   47  chmod -R 770 /mp_sdb1/Project_server02
   48  reboot
   49  df -THP
   50  cd /run/media/root/CentOS\ 7\ x86_64/
   51  ls
   52  cd
   53  cd /etc/yum.repos.d/
   54  vim mrepo.repo
   55  yum install tree
   56  yum clean all
   57  yum repolist
   58  ll
   59  mkdir /root/bkp-repo
   60  mv CentOS-* /root/bkp-repo/
   61  ll
   62  yum clean all
   63  yum repolist
   64  yum install tree -y
   65  tree
   66  cd
   67  cat /etc/redhat-release
   68  cat /etc/hostname
   69  fdisk -l | grep "Disk /dev/sd"
   70  df -THP
   71  df -THP | grep mp
   72  df -THP | grep /mp
   73  free -m
   74  swapon -s
   75  swapon -a
   76  swapon -s
   77  lsblk
   78  mkswap /dev/sdb4
   79  blkid /dev/sdb4
   80  vim /etc/fstab
   81  mount -a
   82  swapon -s
   83  swapon -a
   84  swapon -s
   85  free -m
   86  lsblk
   87  reboot
   88  history
[root@chandra-empid-server-02 ~]#
[root@chandra-empid-server-02 ~]#
[root@chandra-empid-server-02 ~]#
[root@chandra-empid-server-02 ~]# cat /etc/fstab

#
# /etc/fstab
# Created by anaconda on Wed Sep  7 15:41:57 2022
#
# Accessible filesystems, by reference, are maintained under '/dev/disk'
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
#
/dev/mapper/centos-root /                       xfs     defaults        0 0
UUID=87c06dbf-5c5b-41bb-ace6-7365ece0afcd /boot                   xfs     defaults        0 0
/dev/mapper/centos-swap swap                    swap    defaults        0 0
UUID="df240cee-e7a1-45a7-babf-9a4e076ead97" swap swap defaults 0 0
UUID="BA1E-8C82"   /mp_sdb3    vfat defaults 0 0
UUID="dc5cb27c-38bc-4d4f-89f4-280b850885d1"   /mp_sdb2    ext2 defaults 0 0
UUID="9dc24a4d-f4a6-4fdd-b5f5-eae2eb40ed24"   /mp_sdb1    ext3 defaults 0 0
[root@chandra-empid-server-02 ~]#




########################################## SOlutions end here LAB-02 ####################

##########
 Solution LABs-03 Lab-01-Recap-phase02/3/4/5
##########  
  